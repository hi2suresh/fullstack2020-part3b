(this.webpackJsonptest2=this.webpackJsonptest2||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=t(3),i=t.n(c),l=t(4),m=t(2),s=function(e){var n=e.onHandleAdd,t=e.onNameChange,a=e.onNumberChange,o=e.newName,u=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:t,value:o})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a,value:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d="api/persons",f=function(){return i.a.get(d).then((function(e){return e.data}))},h=function(e){return i.a.post(d,e).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e){var n=e.showThesePersons,t=e.setPersons;return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number,r.a.createElement("button",{key:e.id,onClick:function(){return n=e.id,a=e.name,console.log(n),void(window.confirm("Do you really want to delete ".concat(a,"?"))&&v(n).then((function(e){console.log(e),f().then((function(e){t(e)}))})));var n,a},id:e.id},"delete")," ")})))},p=function(e){var n=e.onFilterChange,t=e.filterValue;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{onChange:n,value:t}))},w=function(e){var n=e.message;if(0===n.length)return null;var t=n.toLowerCase().includes("add")||n.toLowerCase().includes("update");return r.a.createElement("div",{className:t?"note":"error"},n)},g=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],o=n[1];Object(a.useEffect)((function(){f().then((function(e){o(e)}))}),[]);var u=Object(a.useState)(!0),c=Object(m.a)(u,2),i=c[0],d=c[1],v=Object(a.useState)(""),g=Object(m.a)(v,2),j=g[0],O=g[1],C=Object(a.useState)(""),N=Object(m.a)(C,2),y=N[0],k=N[1],S=Object(a.useState)(""),P=Object(m.a)(S,2),T=P[0],A=P[1],L=Object(a.useState)(""),F=Object(m.a)(L,2),I=F[0],D=F[1],H=i?t:t.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:y}),r.a.createElement(p,{onFilterChange:function(e){O(e.target.value),d(!1)},filterValue:j}),r.a.createElement("h2",null,"Add a new Name and Number"),r.a.createElement(s,{onHandleAdd:function(e){e.preventDefault();var n=t.find((function(e){return e.name===T}));if(n){if(window.confirm("".concat(T," is already added to phonebook, replace the old number with new one?"))){var a=Object(l.a)(Object(l.a)({},n),{},{number:I});b(n.id,a).then((function(e){o(t.map((function(e){return e.id===n.id?a:e}))),k("Updated ".concat(a.name," with ").concat(a.number))})).catch((function(e){"error",k("Information of '".concat(n.name,"' failed to update")),setTimeout((function(){k(""),"note"}),4e3),o(t.filter((function(e){return e.id!==n.id})))}))}k("Information of '".concat(n.name,"' is already there in the server")),setTimeout((function(){k(""),"note"}),4e3)}else{var r={name:T,number:I};h(r).then((function(e){console.log(e),o(t.concat(r)),k("Added ".concat(r.name)),setTimeout((function(){k("")}),3e3)})),f().then((function(e){o(e)}))}A(""),D(""),d(!0)},onNameChange:function(e){A(e.target.value)},onNumberChange:function(e){return D(e.target.value)},newName:T,newNumber:I}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{showThesePersons:H,setPersons:o}))};t(37);u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.74ca1811.chunk.js.map